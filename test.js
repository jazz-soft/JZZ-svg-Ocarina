const JZZ = require('jzz');
require('.')(JZZ);

var svg_grid = `<g fill="white" stroke="#ccc" stroke-width="0.01">
<line x1="0" y1="0" x2="1" y2="0"/><line x1="0" y1="0" x2="0" y2="1"/>
<line x1="0" y1="0.1" x2="1" y2="0.1"/><line x1="0.1" y1="0" x2="0.1" y2="1"/>
<line x1="0" y1="0.2" x2="1" y2="0.2"/><line x1="0.2" y1="0" x2="0.2" y2="1"/>
<line x1="0" y1="0.3" x2="1" y2="0.3"/><line x1="0.3" y1="0" x2="0.3" y2="1"/>
<line x1="0" y1="0.4" x2="1" y2="0.4"/><line x1="0.4" y1="0" x2="0.4" y2="1"/>
<line x1="0" y1="0.5" x2="1" y2="0.5"/><line x1="0.5" y1="0" x2="0.5" y2="1"/>
<line x1="0" y1="0.6" x2="1" y2="0.6"/><line x1="0.6" y1="0" x2="0.6" y2="1"/>
<line x1="0" y1="0.7" x2="1" y2="0.7"/><line x1="0.7" y1="0" x2="0.7" y2="1"/>
<line x1="0" y1="0.8" x2="1" y2="0.8"/><line x1="0.8" y1="0" x2="0.8" y2="1"/>
<line x1="0" y1="0.9" x2="1" y2="0.9"/><line x1="0.9" y1="0" x2="0.9" y2="1"/>
<line x1="0" y1="1" x2="1" y2="1"/><line x1="1" y1="0" x2="1" y2="1"/></g>`;
var holes = [
  [.4, .21, .018],
  [.5, .2, .018],
  [.5, .3, .018],
  [.5, .4, .018],
  [.5, .5, .014],
  [.5, .6, .018],
  [.49, .693, .011],
  [.515, .707, .01],
  [.49, .793, .011],
  [.515, .807, .01],
];
var chart = [
  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], // c
  [0, 1, 2, 3, 4, 5, 6, 7, 8],
  [0, 1, 2, 3, 4, 5, 6, 7],       // D
  [0, 1, 2, 3, 4, 5, 6],
  [0, 1, 2, 3, 4, 5],             // E
  [0, 1, 2, 3, 4, 6, 7, 8, 9],    // F
  [0, 1, 2, 3, 5, 6, 7],
  [0, 1, 2, 3],                   // G
  [0, 1, 2, 4, 5, 6],
  [0, 1, 2],                      // A
  [0, 1, 3, 4],
  [[0, 1], [0, 2, 3]],            // B
  [0, 2],                         // C
  [[1, 2], [0]],
  [2],                            // D
  [2, 3, 4, 5, 6, 7],
  [[0, 2], 1, 2, 3, 4, 5],        // E
  [[0, 2], 1, 2, 3, 4, 6, 7],     // F
  [[0, 2], 1, 2, 3, 5],
  [[0, 2], 1, 2, 3],              // G
  [[0, 2], 1, 2, 4],
  [[0, 2], 1, 2],                 // A
  [[0, 2], 1, 2, 4, 5, 6, 7],
  [[[0, 2], 1, 2, 4, 5], [[0, 2], 1, 5, 6, 7, 8, 9]],
  [[0, 2], 1, 4, 5],              // C
  [[0, 2], 1, 3, 4, 5, 8, 9],
  [[0, 2], 1, 3, 4, 6, 7]         // D
];

var oca = new JZZ.svg.Ocarina({ back: svg_grid, holes: holes, chart: chart });
var dump = [];
dump.push('<svg version="1.1" viewBox="0 0 6 5" xmlns="http://www.w3.org/2000/svg">');
var r = 0, c = 0, i, j, n;
for (i = 0; i < oca.chart.length; i++) for (j = 0; j < oca.chart[i].length; j++) {
  n = i + oca.key;
  oca.set(n, j);
  n = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'][n % 12] + Math.floor(n / 12);
  if (j) n += ' *';
  dump.push('<g transform="translate(' + c + ' ' + r + ')">');
  dump.push(oca.dump());
  dump.push('<text x=".05" y=".15" font-size=".12">' + n + '</text>');
  dump.push('</g>');
  c++;
  if (c > 5) { r++; c = 0; }
}
dump.push('</svg>');
console.log(dump.join('\n'));